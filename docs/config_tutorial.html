
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Modifying the FW Config &#8212; FireWorks 1.8.7 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Improving FireWorks performance" href="performance_tutorial.html" />
    <link rel="prev" title="Configuring Security" href="security_tutorial.html" />
 
<link href='https://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance_tutorial.html" title="Improving FireWorks performance"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="security_tutorial.html" title="Configuring Security"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FireWorks 1.8.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="modifying-the-fw-config">
<h1>Modifying the FW Config<a class="headerlink" href="#modifying-the-fw-config" title="Permalink to this headline">¶</a></h1>
<p>Many parameters used by FireWorks can be changed to suit your needs. Some examples include:</p>
<ul class="simple">
<li>specifying the default locations of your configuration files. This will save you <strong>a lot</strong> of typing when running FireWorks scripts, e.g. <code class="docutils literal notranslate"><span class="pre">lpad</span> <span class="pre">-l</span> <span class="pre">my_launchpad.yaml</span> <span class="pre">get_fws</span></code> becomes <code class="docutils literal notranslate"><span class="pre">lpad</span> <span class="pre">get_fws</span></code> once you’ve set your default LaunchPad location.</li>
<li>enabling Firetasks for which the code is located outside of the FireWorks package</li>
<li>smaller adjustments, e.g. whether to print a <code class="docutils literal notranslate"><span class="pre">FW.json</span></code> file in your run directory</li>
<li>performance tweaks (not recommended!)</li>
</ul>
<div class="section" id="how-to-modify-the-fw-config">
<h2>How to modify the FW Config<a class="headerlink" href="#how-to-modify-the-fw-config" title="Permalink to this headline">¶</a></h2>
<p>A sample FW_config file (that does not change any settings) is located in the FireWorks tutorial directory: <code class="docutils literal notranslate"><span class="pre">&lt;INSTALL_DIR&gt;/fw_tutorials/fw_config/FW_config.yaml</span></code>.</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>To activate the config file, you can do any one of the following:</dt>
<dd><ol class="first lowerroman simple">
<li>put it in the current directory where you run FireWorks commands</li>
<li>put it in your root <code class="docutils literal notranslate"><span class="pre">&lt;INSTALL_DIR&gt;</span></code> (do not change it’s name!). Recall that your <code class="docutils literal notranslate"><span class="pre">&lt;INSTALL_DIR&gt;</span></code> can be found by typing <code class="docutils literal notranslate"><span class="pre">lpad</span> <span class="pre">version</span></code>.</li>
<li>put the config file in <code class="docutils literal notranslate"><span class="pre">&lt;HOME&gt;/.fireworks</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;HOME&gt;</span></code> is your home directory (don’t forget the <code class="docutils literal notranslate"><span class="pre">.</span></code> in the <code class="docutils literal notranslate"><span class="pre">.fireworks</span></code> directory!)</li>
<li>put the config file anywhere, but set the <cite>FW_CONFIG_FILE</cite> as an environment variable in your OS. The <code class="docutils literal notranslate"><span class="pre">FW_CONFIG_FILE</span></code> environment variable should be set to the <strong>full</strong> path (no relative links!) of your config file, including the filename.</li>
</ol>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The config file in the current directory will always take precedence.</p>
</div>
</dd>
</dl>
</li>
<li><p class="first">To test whether your config file is activated, run any LaunchPad command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lpad</span> <span class="n">version</span>
</pre></div>
</div>
</li>
</ol>
<p>You should see text printed to the Terminal saying <code class="docutils literal notranslate"><span class="pre">successfully</span> <span class="pre">loaded</span> <span class="pre">your</span> <span class="pre">custom</span> <span class="pre">FW_config.yaml!</span></code>. You can remove this text by deleting the <code class="docutils literal notranslate"><span class="pre">ECHO_TEST</span></code> parameter from your <code class="docutils literal notranslate"><span class="pre">FW_config.yaml</span></code> file.</p>
<div class="section" id="specifying-default-locations-for-the-config-files">
<span id="configfile-label"></span><h3>Specifying default locations for the config files<a class="headerlink" href="#specifying-default-locations-for-the-config-files" title="Permalink to this headline">¶</a></h3>
<p>It can be annoying to manually type in the <code class="docutils literal notranslate"><span class="pre">-l</span></code>, <code class="docutils literal notranslate"><span class="pre">-w</span></code>, and <code class="docutils literal notranslate"><span class="pre">-q</span></code> parameters in FireWorks scripts (corresponding to the locations of the LaunchPad, FireWorker, and QueueAdapter files, respectively). You can set these parameters once and for all by specifying the following variables in your FWConfig:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LAUNCHPAD_LOC</span><span class="p">:</span> <span class="n">fullpath</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my_launchpad</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">FWORKER_LOC</span><span class="p">:</span> <span class="n">fullpath</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my_fworker</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">QUEUEADAPTER_LOC</span><span class="p">:</span> <span class="n">fullpath</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my_qadapter</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">be sure to use full paths, not relative paths or BASH shortcuts!</p>
</div>
</div>
<div class="section" id="specifying-default-locations-for-the-config-files-alternate">
<h3>Specifying default locations for the config files (alternate)<a class="headerlink" href="#specifying-default-locations-for-the-config-files-alternate" title="Permalink to this headline">¶</a></h3>
<p>An alternate strategy is to set a single parameter in FWConfig called <code class="docutils literal notranslate"><span class="pre">CONFIG_FILE_DIR</span></code>. This should be the full path to a directory containing files named <code class="docutils literal notranslate"><span class="pre">my_launchpad.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">my_fworker.yaml</span></code>, and <code class="docutils literal notranslate"><span class="pre">my_qadapter.yaml</span></code>. FireWorks looks for these files in the <code class="docutils literal notranslate"><span class="pre">CONFIG_FILE_DIR</span></code> if it cannot find them elsewhere. If unset in the FWConfig, the <code class="docutils literal notranslate"><span class="pre">CONFIG_FILE_DIR</span></code> is automatically set to the directory you are running your FW script in.</p>
</div>
<div class="section" id="linking-to-firetasks-in-external-packages">
<h3>Linking to Firetasks in external packages<a class="headerlink" href="#linking-to-firetasks-in-external-packages" title="Permalink to this headline">¶</a></h3>
<p>If you’ve placed Python code for some of your own custom Firetasks in an external Python package named <em>my_package.firetasks</em>, you can notify FireWorks of the Firetasks in this directory by adding the packages to your config:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ADD_USER_PACKAGES</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">my_package</span><span class="o">.</span><span class="n">firetasks</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure your package is in your PYTHONPATH! For example, typing <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">my_package</span> <span class="pre">import</span> <span class="pre">firetasks</span></code> in an interactive Python terminal should succeed.</p>
</div>
<p>An alternative is to give your Firetasks a _fw_name such as <code class="docutils literal notranslate"><span class="pre">{{package.subpackage.module.Class}}</span></code>. When enclosed in double braces, FireWorks will not search USER_PACKAGES and instead directly load the class. The disadvantage of this method is that you <em>must</em> update the <em>FW_NAME_UPDATES</em> key of the FWConfig if you refactor or move the class.</p>
</div>
<div class="section" id="parameters-you-might-want-to-change">
<h3>Parameters you might want to change<a class="headerlink" href="#parameters-you-might-want-to-change" title="Permalink to this headline">¶</a></h3>
<p>A few basic parameters that can be tweaked are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SORT_FWS:</span> <span class="pre">''</span></code> - set to <code class="docutils literal notranslate"><span class="pre">FIFO</span></code> if you want older FireWorks to be run first, <code class="docutils literal notranslate"><span class="pre">FILO</span></code> if you want recent FireWorks run first. Note that higher priority FireWorks are always run first.</li>
<li><code class="docutils literal notranslate"><span class="pre">PRINT_FW_JSON:</span> <span class="pre">True</span></code> - whether to print the <code class="docutils literal notranslate"><span class="pre">FW.json</span></code> file in your run directory</li>
<li><code class="docutils literal notranslate"><span class="pre">PRINT_FW_YAML:</span> <span class="pre">False</span></code> - whether to print the <code class="docutils literal notranslate"><span class="pre">FW.yaml</span></code> file in your run directory</li>
<li><code class="docutils literal notranslate"><span class="pre">SUBMIT_SCRIPT_NAME:</span> <span class="pre">FW_submit.script</span></code> - the name to give the script for submitting PBS/SLURM/etc. queue jobs</li>
<li><code class="docutils literal notranslate"><span class="pre">FW_LOGGING_FORMAT:</span> <span class="pre">%(asctime)s</span> <span class="pre">%(levelname)s</span> <span class="pre">%(message)s</span></code> - format for loggers (this String will be passed to <code class="docutils literal notranslate"><span class="pre">logging.Formatter()</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">ALWAYS_CREATE_NEW_BLOCK:</span> <span class="pre">False</span></code> - set True if you want the Queue Launcher to always create a new block directory every time it is called, False if you want to re-use previous blocks</li>
<li><code class="docutils literal notranslate"><span class="pre">TEMPLATE_DIR</span></code> - where to store templates if you are using the <a class="reference internal" href="templatewritertask.html"><span class="doc">TemplateWriterTask</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">REMOVE_USELESS_DIRS:</span> <span class="pre">False</span></code> - tries to delete empty launch directories created when setting the <code class="docutils literal notranslate"><span class="pre">_launch_dir</span></code> in the spec of your Firework.</li>
<li><code class="docutils literal notranslate"><span class="pre">EXCEPT_DETAILS_ON_RERUN:</span> <span class="pre">False</span></code> - if True, when rerunning a FIZZLED Firework, the serialized exception details are added to the spec.</li>
<li><code class="docutils literal notranslate"><span class="pre">WEBSERVER_HOST:</span> <span class="pre">127.0.0.1</span></code> - the default host on which to run the web server</li>
<li><code class="docutils literal notranslate"><span class="pre">WEBSERVER_PORT:</span> <span class="pre">5000</span></code> - the default port on which to run the web server</li>
<li><code class="docutils literal notranslate"><span class="pre">QUEUE_JOBNAME_MAXLEN:</span> <span class="pre">20</span></code> - the max length of the job name to send to the queuing system (some queuing systems limit the size of job names)</li>
</ul>
</div>
<div class="section" id="parameters-that-you-probably-shouldn-t-change">
<h3>Parameters that you probably shouldn’t change<a class="headerlink" href="#parameters-that-you-probably-shouldn-t-change" title="Permalink to this headline">¶</a></h3>
<p>Some parameters that you can change, but probably shouldn’t, are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">QUEUE_RETRY_ATTEMPTS:</span> <span class="pre">10</span></code> - number of attempts to re-try communicating with queue server when communication fails</li>
<li><code class="docutils literal notranslate"><span class="pre">QUEUE_UPDATE_INTERVAL:</span> <span class="pre">5</span></code> - max interval (seconds) needed for queue to update after submitting a job</li>
<li><code class="docutils literal notranslate"><span class="pre">WFLOCK_EXPIRATION_SECS:</span> <span class="pre">300</span></code> -  wait this long (in seconds) for a WFLock before expiring. Must set <em>much</em> higher than DB update time for a WF.</li>
<li><code class="docutils literal notranslate"><span class="pre">WFLOCK_EXPIRATION_KILL</span> <span class="pre">False</span></code> - If True, kill WFLock on expiration. If False, raise Error instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">PING_TIME_SECS:</span> <span class="pre">3600</span></code> - means that the Rocket will ping the LaunchPad that it’s alive every 3600 seconds. See the <a class="reference internal" href="failures_tutorial.html"><span class="doc">failures tutorial</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">RUN_EXPIRATION_SECS:</span> <span class="pre">14400</span></code> - means that the LaunchPad will mark a Rocket FIZZLED if it hasn’t received a ping in 14400 seconds. See the <a class="reference internal" href="failures_tutorial.html"><span class="doc">failures tutorial</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">RESERVATION_EXPIRATION_SECS:</span> <span class="pre">1209600</span></code> - means that the LaunchPad will cancel the reservation of a Firework that’s been in the queue for 1209600 seconds (14 days). See the <a class="reference internal" href="queue_tutorial_pt2.html"><span class="doc">queue reservation tutorial</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">FW_BLOCK_FORMAT:</span> <span class="pre">%Y-%m-%d-%H-%M-%S-%f</span></code> - the <code class="docutils literal notranslate"><span class="pre">launcher_</span></code> and <code class="docutils literal notranslate"><span class="pre">block_</span></code> directories written by the Rocket and Queue Launchers add a date stamp to the directory. You can change this if desired.</li>
<li><code class="docutils literal notranslate"><span class="pre">QSTAT_FREQUENCY:</span> <span class="pre">50</span></code> - number of jobs submitted to queue before re-executing a qstat. 1 means always do qstat, higher avoids unnecessarily loading the qstat server. Set this low if you have multiple processes submitting jobs to the same queue.</li>
<li><code class="docutils literal notranslate"><span class="pre">PW_CHECK_NUM:</span> <span class="pre">10</span></code> - how many FireWorks/Worflows can be changed with a single LaunchPad command (like <code class="docutils literal notranslate"><span class="pre">rerun_fws</span></code>) before a password is required.</li>
</ul>
<p>For a full list of parameters that can be changed, you can browse the <code class="docutils literal notranslate"><span class="pre">fw_config.py</span></code> file in the FireWorks source.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modifying the FW Config</a><ul>
<li><a class="reference internal" href="#how-to-modify-the-fw-config">How to modify the FW Config</a><ul>
<li><a class="reference internal" href="#specifying-default-locations-for-the-config-files">Specifying default locations for the config files</a></li>
<li><a class="reference internal" href="#specifying-default-locations-for-the-config-files-alternate">Specifying default locations for the config files (alternate)</a></li>
<li><a class="reference internal" href="#linking-to-firetasks-in-external-packages">Linking to Firetasks in external packages</a></li>
<li><a class="reference internal" href="#parameters-you-might-want-to-change">Parameters you might want to change</a></li>
<li><a class="reference internal" href="#parameters-that-you-probably-shouldn-t-change">Parameters that you probably shouldn’t change</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="security_tutorial.html"
                        title="previous chapter">Configuring Security</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="performance_tutorial.html"
                        title="next chapter">Improving FireWorks performance</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/config_tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance_tutorial.html" title="Improving FireWorks performance"
             >next</a> |</li>
        <li class="right" >
          <a href="security_tutorial.html" title="Configuring Security"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FireWorks 1.8.7 documentation</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53488807-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>